<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPPU Notes FE 2025-2026</title>
    <style>
        :root {
            --bg-color: #000000;
            --card-bg: #111111;
            --text-color: #ffffff;
            --header-bg: #ffffff;
            --header-text: #000000;
            --nav-gradient: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            --purple-blue: #6a11cb;
        }

        body { font-family: 'Segoe UI', sans-serif; margin: 0; background-color: var(--bg-color); color: var(--text-color); padding-bottom: 90px; }
        
        /* Header */
        header { background: var(--header-bg); color: var(--header-text); text-align: center; padding: 15px 10px; border-radius: 0 0 30px 30px; position: sticky; top: 0; z-index: 100; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        header h1 { margin: 0; font-size: 1rem; text-transform: uppercase; font-weight: 900; }

        /* Views */
        .view { display: none; padding: 20px; }
        .view.active { display: block; }

        /* Subject Cards */
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        .card { display: flex; flex-direction: column; align-items: center; cursor: pointer; text-align: center; }
        .icon { width: 80px; height: 80px; border-radius: 24px; display: flex; justify-content: center; align-items: center; box-shadow: 0 5px 20px rgba(0,0,0,0.5); margin-bottom: 8px; }
        .icon svg { width: 40px; height: 40px; fill: #fff; }
        .sub-name { font-size: 0.65rem; color: #bbb; font-weight: 600; }

        /* Gradients */
        .g1 { background: linear-gradient(135deg, #00d2ff, #3a7bd5); } .g2 { background: linear-gradient(135deg, #f85032, #e73827); }
        .g3 { background: linear-gradient(135deg, #11998e, #38ef7d); } .g4 { background: linear-gradient(135deg, #f9d423, #ff4e50); }
        .g5 { background: linear-gradient(135deg, #4facfe, #00f2fe); } .g6 { background: linear-gradient(135deg, #962668, #db7093); }
        .g7 { background: linear-gradient(135deg, #6a11cb, #2575fc); } .g8 { background: linear-gradient(135deg, #232526, #414345); }
        .g9 { background: linear-gradient(135deg, #fc4a1a, #f7b733); }

        /* Modal Settings */
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); backdrop-filter: blur(10px); z-index: 1000; justify-content: center; align-items: center; }
        .modal { background: #111; width: 90%; max-width: 380px; border-radius: 30px; padding: 20px; border: 1px solid #222; text-align: center; max-height: 80vh; overflow-y: auto; }
        .btn-opt { width: 100%; padding: 15px; background: #fff; color: #000; border: none; border-radius: 18px; font-weight: bold; cursor: pointer; margin-bottom: 12px; text-align: left; }
        
        /* Admin Upload Button */
        .btn-up { background: #2ecc71; color: #fff; padding: 10px; border-radius: 12px; border: none; cursor: pointer; display: none; width: 100%; margin-bottom: 15px; font-weight: bold; }

        /* File List Items */
        .file-item { background: #1a1a1a; color: #fff; padding: 15px; border-radius: 15px; margin-bottom: 10px; display: flex; align-items: center; border: 1px solid #333; cursor: pointer; text-align: left; }

        /* PDF VIEWER SCREEN */
        #viewer-screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 5000; padding-top: 20px; }
        #pdf-frame { width: 100%; height: 90%; border: none; }

        /* Bottom Nav */
        nav { position: fixed; bottom: 0; width: 100%; max-width: 480px; background: var(--nav-gradient); display: flex; justify-content: space-around; padding: 15px 0; border-radius: 25px 25px 0 0; z-index: 500; }
        .nav-tab { color: rgba(255,255,255,0.5); text-align: center; cursor: pointer; flex: 1; font-size: 0.75rem; font-weight: bold; }
        .nav-tab.active { color: #fff; }
        .nav-tab svg { width: 22px; height: 22px; fill: currentColor; display: block; margin: 0 auto 5px; }
    </style>
</head>
<body>

<header><h1>SPPU Notes FE 2025-2026</h1></header>

<!-- HOME -->
<div id="home" class="view active">
    <div class="grid" id="subjects-grid" style="padding: 20px;"></div>
</div>

<!-- RECENT -->
<div id="recent" class="view">
    <h2 style="padding: 20px;">Recently Viewed</h2>
    <div id="history-list" style="padding: 0 20px;"></div>
</div>

<!-- PROFILE -->
<div id="profile" class="view">
    <div id="login-form" style="padding: 20px;">
        <div style="background: #111; padding: 25px; border-radius: 25px; border: 1px solid #222;">
            <h3>Admin / Student Login</h3>
            <input type="text" id="l-user" placeholder="Username" style="width:100%; padding:12px; margin:10px 0; border-radius:10px; background:#000; border:1px solid #333; color:#fff;">
            <input type="password" id="l-pass" placeholder="Password" style="width:100%; padding:12px; margin:10px 0; border-radius:10px; background:#000; border:1px solid #333; color:#fff;">
            <button onclick="login()" style="width:100%; padding:15px; border-radius:15px; border:none; background:#fff; font-weight:bold; margin-top:10px;">Login</button>
        </div>
    </div>
    <div id="logged-in" style="display:none; padding: 20px; text-align:center;">
        <h3 id="u-name"></h3>
        <p id="u-role" style="color:#2575fc; font-weight:bold;"></p>
        <button onclick="logout()" style="width:100%; padding:15px; border-radius:15px; border:none; background:#e74c3c; color:#fff; font-weight:bold;">Logout</button>
    </div>
</div>

<!-- SUBJECT MODAL -->
<div id="overlay" class="overlay" onclick="closeMenu()">
    <div class="modal" onclick="event.stopPropagation()">
        <h3 id="mod-sub">Subject Name</h3>
        <div id="main-menu">
            <button class="btn-opt" onclick="showSection('Units')">Notes (Unit 1-5) ‚ûî</button>
            <button class="btn-opt" onclick="showSection('Assignments')">Assignments (1-5) ‚ûî</button>
            <button class="btn-opt" onclick="openCategory('Previous Year Papers')">PYQ Papers ‚ûî</button>
            <button class="btn-opt" onclick="openCategory('Paper Answers')">Paper Answers ‚ûî</button>
        </div>

        <div id="sub-menu" style="display:none">
            <p onclick="showMain()" style="color:#2575fc; cursor:pointer; margin-bottom:15px; font-weight:bold;">‚Üê Back</p>
            <div id="sub-container"></div>
        </div>

        <div id="file-list-view" style="display:none">
            <p onclick="goBack()" style="color:#2575fc; cursor:pointer; margin-bottom:15px; font-weight:bold;">‚Üê Back</p>
            <h4 id="cat-title" style="color:#2575fc;">Files</h4>
            <button class="btn-up" id="up-btn" onclick="uploadFile()">+ Admin: Upload PDF</button>
            <div id="file-container"></div>
        </div>
        <button onclick="closeMenu()" style="background:none; border:none; color:#e74c3c; font-weight:bold; margin-top:20px;">Close</button>
    </div>
</div>

<!-- FULL SCREEN PDF VIEWER -->
<div id="viewer-screen">
    <button onclick="closeViewer()" style="margin: 15px; padding: 10px 20px; border-radius: 10px; border:none; background:#fff; font-weight:bold;">‚Üê Back to App</button>
    <iframe id="pdf-frame"></iframe>
</div>

<!-- NAVIGATION -->
<nav>
    <div class="nav-tab active" onclick="switchTab('home', this)"><svg viewBox="0 0 24 24"><path d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"/></svg>Home</div>
    <div class="nav-tab" onclick="switchTab('recent', this)"><svg viewBox="0 0 24 24"><path d="M13,3A9,9 0 0,0 4,12H1L4.89,15.89L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3M12,8V13L16.28,15.54L17,14.33L13.5,12.25V8H12Z"/></svg>Recent</div>
    <div class="nav-tab" onclick="switchTab('profile', this)"><svg viewBox="0 0 24 24"><path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/></svg>Profile</div>
</nav>

<script>
    let isAdmin = false;
    let currentSub = "";
    let currentCat = "";
    let currentView = "main";

    const subjects = [
        {n: "Engineering Physics", c: "g1", i: "‚öõÔ∏è"}, {n: "Engineering Mechanics", c: "g2", i: "‚öôÔ∏è"},
        {n: "Engineering Mathematics 1", c: "g3", i: "üìê"}, {n: "Basic Electrical", c: "g4", i: "‚ö°"},
        {n: "Engineering FPL", c: "g5", i: "üíª"}, {n: "Engineering Chemistry", c: "g6", i: "üß™"},
        {n: "Engineering Electronics", c: "g7", i: "üîå"}, {n: "Engineering Graphics", c: "g8", i: "üñäÔ∏è"},
        {n: "Engineering Maths 2", c: "g9", i: "‚ôæÔ∏è"}
    ];

    window.onload = () => {
        const grid = document.getElementById('subjects-grid');
        subjects.forEach(s => {
            grid.innerHTML += `<div class="card" onclick="openSubject('${s.n}')"><div class="icon ${s.c}">${s.i}</div><div class="sub-name">${s.n}</div></div>`;
        });
    };

    function switchTab(id, el) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
        el.classList.add('active');
        if(id === 'recent') updateHistory();
    }

    function openSubject(name) {
        currentSub = name;
        document.getElementById('mod-sub').innerText = name;
        document.getElementById('overlay').style.display = 'flex';
        showMain();
    }

    function showSection(type) {
        currentView = "sub";
        document.getElementById('main-menu').style.display = 'none';
        document.getElementById('sub-menu').style.display = 'block';
        const container = document.getElementById('sub-container');
        container.innerHTML = "";
        for(let i=1; i<=5; i++) {
            let label = type === 'Units' ? `Unit ${i} Notes` : `Assignment ${i}`;
            container.innerHTML += `<button class="btn-opt" onclick="openCategory('${label}')">${label}</button>`;
        }
    }

    function openCategory(cat) {
        currentCat = cat;
        document.getElementById('main-menu').style.display = 'none';
        document.getElementById('sub-menu').style.display = 'none';
        document.getElementById('file-list-view').style.display = 'block';
        document.getElementById('cat-title').innerText = cat;
        document.getElementById('up-btn').style.display = isAdmin ? 'block' : 'none';
        renderFiles();
    }

    function renderFiles() {
        const container = document.getElementById('file-container');
        container.innerHTML = "";
        const key = `${currentSub}_${currentCat}`;
        const files = JSON.parse(localStorage.getItem(key)) || [];
        if(files.length === 0) container.innerHTML = "<p style='color:#555;'>No files uploaded.</p>";
        files.forEach((file, index) => {
            container.innerHTML += `<div class="file-item" onclick="viewPDF('${key}', ${index})">üìÑ ${file.name}</div>`;
        });
    }

    // ACTUAL PDF UPLOAD LOGIC
    function uploadFile() {
        const inp = document.createElement('input');
        inp.type = 'file';
        inp.accept = 'application/pdf';
        inp.onchange = e => {
            const file = e.target.files[0];
            const reader = new FileReader();
            reader.onload = function(event) {
                const fileData = event.target.result; // Base64 data
                const key = `${currentSub}_${currentCat}`;
                let files = JSON.parse(localStorage.getItem(key)) || [];
                files.push({ name: file.name, data: fileData });
                localStorage.setItem(key, JSON.stringify(files));
                alert("File Uploaded Successfully!");
                renderFiles();
            };
            reader.readAsDataURL(file);
        };
        inp.click();
    }

    function viewPDF(key, index) {
        const files = JSON.parse(localStorage.getItem(key));
        const file = files[index];
        const frame = document.getElementById('pdf-frame');
        frame.src = file.data;
        document.getElementById('viewer-screen').style.display = 'block';
        
        // Add to history
        let history = JSON.parse(localStorage.getItem('recent_history')) || [];
        if(!history.some(h => h.name === file.name)) {
            history.unshift({ name: file.name, data: file.data });
            localStorage.setItem('recent_history', JSON.stringify(history.slice(0, 10)));
        }
    }

    function updateHistory() {
        const container = document.getElementById('history-list');
        const history = JSON.parse(localStorage.getItem('recent_history')) || [];
        container.innerHTML = history.length === 0 ? "No history." : "";
        history.forEach((h, i) => {
            container.innerHTML += `<div class="file-item" onclick="openHistoryPDF(${i})">üìÑ ${h.name}</div>`;
        });
    }

    function openHistoryPDF(i) {
        const history = JSON.parse(localStorage.getItem('recent_history'));
        document.getElementById('pdf-frame').src = history[i].data;
        document.getElementById('viewer-screen').style.display = 'block';
    }

    function closeViewer() { document.getElementById('viewer-screen').style.display = 'none'; document.getElementById('pdf-frame').src = ""; }
    function login() {
        const u = document.getElementById('l-user').value;
        const p = document.getElementById('l-pass').value;
        if(u === 'pratapmahadik' && p === '9356858235') {
            isAdmin = true;
            document.getElementById('login-form').style.display = 'none';
            document.getElementById('logged-in').style.display = 'block';
            document.getElementById('u-name').innerText = "Hello, Pratap Mahadik";
            document.getElementById('u-role').innerText = "ADMIN ACCESS";
        } else { alert("Login failed! Invalid credentials."); }
    }
    function logout() { isAdmin = false; location.reload(); }
    function closeMenu() { document.getElementById('overlay').style.display = 'none'; }
    function showMain() { document.getElementById('main-menu').style.display = 'block'; document.getElementById('sub-menu').style.display = 'none'; document.getElementById('file-list-view').style.display = 'none'; }
    function goBack() { if(currentCat.includes('Unit') || currentCat.includes('Assignment')) showSection(currentCat.includes('Unit') ? 'Units' : 'Assignments'); else showMain(); }
</script>
</body>
</html>